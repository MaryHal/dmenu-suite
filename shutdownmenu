#!/bin/bash
# Dmenu shutdown menu.
# This script assumes you can run "shutdown" as a user through sudo without
# entering a password. This can be done by editing /etc/sudoers via visudo.
source $HOME/bin/menu/lib/dmenu_helpers.sh

mainMenu="[Shutdown]
[Reboot]
[Sleep]
[Cancel]"
#[Hibernate] #defunct
#[Lock]

pauseMenu="now
60m
45m
30m
15m
10m
5m
3m
2m
1m"

action=$(menu "Option: " "$mainMenu")
[ -z "$action" ] && exit

case "$action" in
    '[Shutdown]')
        pauseTime=$(menu "Pause:" "$pauseMenu")
        [ -z "$pauseTime" ] && exit

        sudo shutdown -h "$pauseTime"
    ;;
    '[Reboot]')
        pauseTime=$(menu "Pause:" "$pauseMenu")
        [ -z "$pauseTime" ] && exit

        sudo shutdown -r "$pauseTime"
    ;;
    '[Sleep]')
        urxvtc -e sh -c "sudo systemctl suspend"
    ;;
    '[Cancel]')
        sudo shutdown -c
    ;;
esac

